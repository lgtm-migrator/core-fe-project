{"version":3,"file":"logger-context.js","sourceRoot":"","sources":["../../src/platform/logger-context.ts"],"names":[],"mappings":"AAAA,SAAS,gBAAgB;IACrB,wCAAwC;IACxC,kCAAkC;IAClC,8CAA8C;IAC9C,0BAA0B;IAC1B,OAAO,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,OAAO,GAAG,IAAI,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;AAC7G,CAAC;AAED;;;;;GAKG;AACH,SAAS,YAAY;IACjB,IAAI;QACA,IAAM,KAAK,GAAG,wBAAwB,CAAC;QACvC,IAAM,UAAU,GAAG,cAAc,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QACjD,IAAI,UAAU,EAAE;YACZ,OAAO,UAAU,CAAC;SACrB;aAAM;YACH,IAAM,KAAK,GAAG,gBAAgB,EAAE,CAAC;YACjC,cAAc,CAAC,OAAO,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;YACrC,OAAO,KAAK,CAAC;SAChB;KACJ;IAAC,OAAO,CAAC,EAAE;QACR,OAAO,gBAAgB,EAAE,CAAC;KAC7B;AACL,CAAC;AAED,MAAM,CAAC,IAAM,aAAa,GAAG;IACzB,WAAW,EAAE,cAAM,OAAA,QAAQ,CAAC,IAAI,EAAb,CAAa;IAChC,UAAU,EAAE,YAAY,EAAE;CAC7B,CAAC","sourcesContent":["function generateUniqueId() {\n    // A UUID for current visitor, based on:\n    // - Current time (in millisecond)\n    // - Some random number (around 1000~10000000)\n    // E.g: 169e68f80c9-1b4104\n    return new Date().getTime().toString(16) + \"-\" + Math.floor(Math.random() * 9999900 + 1000).toString(16);\n}\n\n/**\n * CAVEAT:\n * In Apple Safari, the user may block sessionStorage access via setting \"Block All Cookies\".\n * The following code will throw error in such case.\n * Ref: https://codingrepo.com/javascript/2018/11/15/safari-securityerror-dom-exception-18-thrown-by-localstorage-or-cookies-are-blocked/\n */\nfunction getSessionId() {\n    try {\n        const token = \"@@framework-session-id\";\n        const previousId = sessionStorage.getItem(token);\n        if (previousId) {\n            return previousId;\n        } else {\n            const newId = generateUniqueId();\n            sessionStorage.setItem(token, newId);\n            return newId;\n        }\n    } catch (e) {\n        return generateUniqueId();\n    }\n}\n\nexport const loggerContext = {\n    request_url: () => location.href,\n    session_id: getSessionId(),\n};\n"]}