{"version":3,"file":"NavigationGuard.js","sourceRoot":"","sources":["../../src/platform/NavigationGuard.tsx"],"names":[],"mappings":";AAAA,OAAO,KAAK,MAAM,OAAO,CAAC;AAC1B,OAAO,EAAC,OAAO,EAAe,MAAM,aAAa,CAAC;AAClD,OAAO,EAAC,MAAM,EAAC,MAAM,cAAc,CAAC;AAapC;IAAwB,6BAAiC;IAAzD;;IAYA,CAAC;IAXY,sCAAkB,GAA3B,UAA4B,SAA0B;QAC5C,IAAA,KAAyB,IAAI,CAAC,KAAK,EAAlC,OAAO,aAAA,EAAE,WAAW,iBAAc,CAAC;QAC1C,IAAI,SAAS,CAAC,WAAW,KAAK,WAAW,EAAE;YACvC,MAAM,CAAC,cAAc,GAAG,WAAW,CAAC,CAAC,CAAC,cAAM,OAAA,OAAO,EAAP,CAAO,CAAC,CAAC,CAAC,IAAI,CAAC;SAC9D;IACL,CAAC;IAEQ,0BAAM,GAAf;QACU,IAAA,KAAyB,IAAI,CAAC,KAAK,EAAlC,WAAW,iBAAA,EAAE,OAAO,aAAc,CAAC;QAC1C,OAAO,oBAAC,MAAM,IAAC,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,WAAW,GAAI,CAAC;IAC3D,CAAC;IACL,gBAAC;AAAD,CAAC,AAZD,CAAwB,KAAK,CAAC,aAAa,GAY1C;AAED,IAAM,eAAe,GAAG,UAAC,KAAY,IAAiB,OAAA,CAAC,EAAC,WAAW,EAAE,KAAK,CAAC,mBAAmB,EAAC,CAAC,EAA1C,CAA0C,CAAC;AAEjG,MAAM,CAAC,IAAM,eAAe,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC,SAAS,CAAC,CAAC","sourcesContent":["import React from \"react\";\nimport {connect, DispatchProp} from \"react-redux\";\nimport {Prompt} from \"react-router\";\nimport {State} from \"../reducer\";\n\ninterface OwnProps {\n    message: string;\n}\n\ninterface StateProps {\n    isPrevented: boolean;\n}\n\ninterface Props extends OwnProps, StateProps, DispatchProp {}\n\nclass Component extends React.PureComponent<Props, State> {\n    override componentDidUpdate(prevProps: Readonly<Props>): void {\n        const {message, isPrevented} = this.props;\n        if (prevProps.isPrevented !== isPrevented) {\n            window.onbeforeunload = isPrevented ? () => message : null;\n        }\n    }\n\n    override render() {\n        const {isPrevented, message} = this.props;\n        return <Prompt message={message} when={isPrevented} />;\n    }\n}\n\nconst mapStateToProps = (state: State): StateProps => ({isPrevented: state.navigationPrevented});\n\nexport const NavigationGuard = connect(mapStateToProps)(Component);\n"]}